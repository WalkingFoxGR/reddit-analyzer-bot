services:
  - type: web
    name: reddit-analyzer-api
    env: python
    buildCommand: "pip install -r requirements.txt"
    startCommand: >
      gunicorn reddit_api:app
               --bind 0.0.0.0:$PORT
               --worker-class gthread
               --threads 4
               --workers 2
               --timeout 300
               --keep-alive 300
               --max-requests 1000
               --max-requests-jitter 100
    envVars:
      - key: GUNICORN_CMD_ARGS
        value: "--log-level info --access-logfile -"
    python:
      version: "3.11"
